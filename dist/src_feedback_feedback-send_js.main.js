/*! For license information please see src_feedback_feedback-send_js.main.js.LICENSE.txt */
(self.webpackChunkneonshopspb=self.webpackChunkneonshopspb||[]).push([["src_feedback_feedback-send_js"],{"./src/feedback/feedback-send.js":()=>{eval("const form = document.querySelector('.feedback-form');\r\n\r\nconst submitButton = document.getElementById('submit-btn');\r\nconst checkbox = document.getElementById('chekcbox-feedback');\r\n\r\nsubmitButton.disabled = false;\r\n\r\n\r\ncheckbox.addEventListener('change', function() {\r\n    if (checkbox.checked) {\r\n        submitButton.disabled = false;\r\n        submitButton.style.backgroundColor = ''; // Возвращает кнопке исходный цвет\r\n    } else {\r\n        submitButton.disabled = true;\r\n        submitButton.style.backgroundColor = 'lightgray'; // Меняет цвет кнопки при отключенном состоянии\r\n    }\r\n});\r\n\r\nform.addEventListener('submit', async function(event) {\r\n    event.preventDefault();\r\n\r\n    const name = document.getElementById('name-feedback').value;\r\n    const phone = document.getElementById('phone-feedback').value;\r\n    const checkbox = document.getElementById('chekcbox-feedback');\r\n    const toastContainer = document.querySelector('.toast-container');\r\n\r\n    if (name && phone && checkbox.checked) {\r\n\r\n        const formData = new FormData();\r\n        formData.append('name', name);\r\n        formData.append('phone', phone);\r\n\r\n        try {\r\n            const response = await fetch('http://a0989108.xsph.ru/send-php.php', {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n            const data = await response.json();\r\n            if (data.status === 'success') {\r\n                // Выводим успешный ответ в консоль\r\n                console.log(data.message);\r\n           \r\n                const toast = document.createElement('div');\r\n                toast.className = 'toast fade show';\r\n                toast.setAttribute('role', 'alert');\r\n                toast.setAttribute('aria-live', 'assertive');\r\n                toast.setAttribute('aria-atomic', 'true');\r\n\r\n                toast.innerHTML = `\r\n                    <div class=\"toast-header\">\r\n                        <strong class=\"me-auto\">Ваша заявка ${name}</strong>\r\n                        <small>${new Date().toLocaleTimeString()}</small>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"toast-body\">\r\n                       Успешно отправлена\r\n                    </div>`;\r\n\r\n                toastContainer.appendChild(toast);\r\n                document.getElementById('name-feedback').value = \"\"; // Очистка поля 'name-feedback'\r\n                document.getElementById('phone-feedback').value = \"\"; // Очистка поля 'phone-feedback'\r\n                // Инициализация Bootstrap toast\r\n                new bootstrap.Toast(toast).show();\r\n            } else {\r\n                const toast = document.createElement('div');\r\n                toast.className = 'toast fade show';\r\n                toast.setAttribute('role', 'alert');\r\n                toast.setAttribute('aria-live', 'assertive');\r\n                toast.setAttribute('aria-atomic', 'true');\r\n\r\n                toast.innerHTML = `\r\n                    <div class=\"toast-header\">\r\n                        <strong class=\"me-auto\">Ваша заявка ${name}</strong>\r\n                        <small>${new Date().toLocaleTimeString()}</small>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"toast-body\">\r\n                       Успешно отправлена\r\n                    </div>`;\r\n\r\n                toastContainer.appendChild(toast);\r\n\r\n                // Инициализация Bootstrap toast\r\n                new bootstrap.Toast(toast).show();\r\n            }\r\n\r\n          \r\n\r\n        } catch (error) {\r\n            console.error('Ошибка при выполнении запроса:', error);\r\n        }\r\n    } else {\r\n        const toast = document.createElement('div');\r\n        toast.className = 'toast fade show';\r\n        toast.setAttribute('role', 'alert');\r\n        toast.setAttribute('aria-live', 'assertive');\r\n        toast.setAttribute('aria-atomic', 'true');\r\n\r\n        toast.innerHTML = `\r\n            <div class=\"toast-header\">\r\n                <strong class=\"me-auto\">Ваша заявка</strong>\r\n                <small>${new Date().toLocaleTimeString()}</small>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"toast-body\">\r\n              Заполните пожалуйста данные\r\n            </div>`;\r\n\r\n        toastContainer.appendChild(toast);\r\n     \r\n        // Инициализация Bootstrap toast\r\n        new bootstrap.Toast(toast).show();\r\n       \r\n    }\r\n});\r\n\r\nconst submitButtonFeed = document.querySelector('#submit-btn');\r\n\r\nconst nameInputFeed = document.getElementById('name-feedback');\r\nconst phoneInputFeed = document.getElementById('phone-feedback');\r\n\r\nif (nameInputFeed.value.trim() === '' || phoneInputFeed.value.trim() === '') {\r\n    submitButtonFeed.setAttribute('disabled', 'disabled');\r\n} else {\r\n    submitButtonFeed.removeAttribute('disabled');\r\n}\r\n\r\n\r\nnameInputFeed.addEventListener('input', function() {\r\n  this.value = this.value.replace(/[^a-zA-Zа-яА-Я]/g, '');\r\n  if (nameInputFeed.value.trim() === '' || phoneInputFeed.value.trim() === '') {\r\n    submitButtonFeed.setAttribute('disabled', 'disabled');\r\n} else {\r\n    submitButtonFeed.removeAttribute('disabled');\r\n}\r\n});\r\n\r\nphoneInputFeed.addEventListener('input', function() {\r\n  this.value = this.value.replace(/\\D/g, '');\r\n  if (nameInputFeed.value.trim() === '' || phoneInputFeed.value.trim() === '') {\r\n    submitButtonFeed.setAttribute('disabled', 'disabled');\r\n} else {\r\n    submitButtonFeed.removeAttribute('disabled');\r\n}\r\n});\n\n//# sourceURL=webpack://neonshopspb/./src/feedback/feedback-send.js?")}}]);